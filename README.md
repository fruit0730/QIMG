# QQå¤´åƒAPIè·å–å·¥å…·

ä¸€ä¸ªç®€å•æ˜“ç”¨çš„Pythonå·¥å…·ï¼Œç”¨äºè·å–å’Œä¸‹è½½QQç”¨æˆ·çš„å¤´åƒå›¾ç‰‡ã€‚

## ğŸŒŸ ç‰¹æ€§

- **åŒæ¥å£æ”¯æŒ**ï¼šæ”¯æŒæ™®é€šå¤´åƒå’Œé«˜æ¸…å¤´åƒè·å–
- **å¤šå°ºå¯¸é€‰æ‹©**ï¼šæä¾›40Ã—40ã€100Ã—100ã€140Ã—140ã€640Ã—640ç­‰å¤šç§å°ºå¯¸
- **æ ¼å¼çµæ´»**ï¼šæ”¯æŒPNGã€JPGã€WebPæ ¼å¼è¾“å‡º
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡ä¸‹è½½å¤šä¸ªQQå¤´åƒ
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œç½‘ç»œé‡è¯•æœºåˆ¶
- **é›¶ä¾èµ–**ï¼šæä¾›æ— éœ€ç¬¬ä¸‰æ–¹åº“çš„ç‰ˆæœ¬

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ï¼ˆå¯é€‰ï¼‰

```bash
# å¦‚æœéœ€è¦requestsç‰ˆæœ¬
pip install requests

# æˆ–è€…ä½¿ç”¨å†…ç½®åº“ç‰ˆæœ¬ï¼ˆæ— éœ€å®‰è£…ï¼‰
```

### åŸºæœ¬ç”¨æ³•

```python
from qq_avatar import QQAvatar

# åˆ›å»ºå®ä¾‹
avatar = QQAvatar()

# è·å–å¤´åƒURL
hd_url = avatar.get_avatar_url("123456789", hd=True, size=640)
print(f"é«˜æ¸…å¤´åƒ: {hd_url}")

# ä¸‹è½½å¤´åƒ
avatar.download_avatar("123456789", "avatar.jpg", hd=True)
```

### æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼

```python
import urllib.request

def quick_download(qq: str):
    """ä¸€é”®ä¸‹è½½é«˜æ¸…å¤´åƒ"""
    url = f"http://q.qlogo.cn/headimg_dl?dst_uin={qq}&spec=640&img_type=jpg"
    urllib.request.urlretrieve(url, f"{qq}_avatar.jpg")
    print("ä¸‹è½½å®Œæˆï¼")

# ä½¿ç”¨
quick_download("123456789")
```

## ğŸ“– APIæ¥å£è¯´æ˜

### æ ¸å¿ƒæ–¹æ³•

#### `get_avatar_url(qq, hd=True, size=640)`
è·å–QQå¤´åƒçš„URLåœ°å€ã€‚

**å‚æ•°ï¼š**
- `qq`: QQå·ç ï¼ˆå­—ç¬¦ä¸²æˆ–æ•°å­—ï¼‰
- `hd`: æ˜¯å¦ä½¿ç”¨é«˜æ¸…æ¥å£ï¼ˆé»˜è®¤Trueï¼‰
- `size`: å¤´åƒå°ºå¯¸ï¼ˆé«˜æ¸…æœ€é«˜640ï¼Œæ™®é€šæœ€é«˜140ï¼‰

**è¿”å›ï¼š** å¤´åƒURLå­—ç¬¦ä¸²

#### `download_avatar(qq, save_path=None, hd=True, size=640)`
ä¸‹è½½QQå¤´åƒåˆ°æœ¬åœ°æ–‡ä»¶ã€‚

**å‚æ•°ï¼š**
- `qq`: QQå·ç 
- `save_path`: ä¿å­˜è·¯å¾„ï¼Œå¦‚ä¸æŒ‡å®šåˆ™è‡ªåŠ¨ç”Ÿæˆ
- `hd`: æ˜¯å¦ä½¿ç”¨é«˜æ¸…æ¥å£
- `size`: å¤´åƒå°ºå¯¸

**è¿”å›ï¼š** å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦ä¸‹è½½æˆåŠŸ

#### `batch_download(qq_list, output_dir="avatars", hd=True, size=640)`
æ‰¹é‡ä¸‹è½½å¤šä¸ªQQå¤´åƒã€‚

**å‚æ•°ï¼š**
- `qq_list`: QQå·ç åˆ—è¡¨
- `output_dir`: è¾“å‡ºç›®å½•åç§°
- `hd`: æ˜¯å¦ä½¿ç”¨é«˜æ¸…æ¥å£
- `size`: å¤´åƒå°ºå¯¸

### æ”¯æŒçš„å°ºå¯¸è§„æ ¼

| å°ºå¯¸åç§° | åƒç´ å¤§å° | æ¥å£ç±»å‹ |
|---------|---------|---------|
| æå° | 40Ã—40 | æ™®é€šæ¥å£ |
| å° | 100Ã—100 | æ™®é€šæ¥å£ |
| ä¸­ | 140Ã—140 | æ™®é€šæ¥å£ |
| å¤§ | 200Ã—200 | é«˜æ¸…æ¥å£ |
| é«˜æ¸… | 640Ã—640 | é«˜æ¸…æ¥å£ |

## ğŸ”§ é«˜çº§ç”¨æ³•

### 1. æ‰¹é‡å¤„ç†QQåˆ—è¡¨

```python
qq_list = ["10001", "10002", "10003", "10004", "10005"]
avatar.batch_download(qq_list, output_dir="group_avatars")
```

### 2. è·å–æ‰€æœ‰å°ºå¯¸çš„å¤´åƒ

```python
# è·å–ä¸åŒå°ºå¯¸çš„å¤´åƒ
sizes = [40, 100, 140, 200, 640]
for size in sizes:
    hd = size > 140  # å¤§äº140ä½¿ç”¨é«˜æ¸…æ¥å£
    url = avatar.get_avatar_url("123456789", hd=hd, size=size)
    print(f"{size}x{size}: {url}")
```

### 3. å¤´åƒéªŒè¯

```python
# æ£€æŸ¥å¤´åƒæ˜¯å¦å­˜åœ¨
if avatar.check_avatar_exists("123456789"):
    print("å¤´åƒå­˜åœ¨ï¼Œå¯ä»¥ä¸‹è½½")
else:
    print("å¤´åƒä¸å­˜åœ¨æˆ–QQå·æ— æ•ˆ")
```

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

1. **ç”¨æˆ·ç³»ç»Ÿé›†æˆ** - åœ¨Webåº”ç”¨ä¸­æ˜¾ç¤ºç”¨æˆ·QQå¤´åƒ
2. **æ•°æ®åˆ†æ** - æ‰¹é‡æ”¶é›†QQç”¨æˆ·å¤´åƒä¿¡æ¯
3. **å¤‡ä»½å·¥å…·** - å¤‡ä»½è‡ªå·±æˆ–å¥½å‹çš„å¤´åƒ
4. **ç´ ææ”¶é›†** - ç”¨äºè®¾è®¡æˆ–å±•ç¤ºç”¨é€”
5. **è‡ªåŠ¨åŒ–è„šæœ¬** - ç»“åˆå…¶ä»–åŠŸèƒ½å®ç°è‡ªåŠ¨åŒ–æµç¨‹

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **éšç§å°Šé‡** - ä»…ç”¨äºåˆæ³•ç”¨é€”ï¼Œå°Šé‡ç”¨æˆ·éšç§
2. **APIé™åˆ¶** - è¯·å‹¿é«˜é¢‘è¯·æ±‚ï¼Œé¿å…è¢«å°IP
3. **å¤´åƒå¯ç”¨æ€§** - éƒ¨åˆ†QQå·å¯èƒ½æ²¡æœ‰è®¾ç½®å¤´åƒæˆ–è®¾ç½®äº†éšç§
4. **æ–‡ä»¶æ ¼å¼** - é«˜æ¸…æ¥å£é»˜è®¤è¿”å›JPGï¼Œæ™®é€šæ¥å£è¿”å›PNG
5. **ç½‘ç»œç¯å¢ƒ** - ç¡®ä¿ç½‘ç»œé€šç•…ï¼Œéƒ¨åˆ†ç½‘ç»œå¯èƒ½æ— æ³•è®¿é—®QQæœåŠ¡å™¨

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### æ¥å£URLæ ¼å¼

**æ™®é€šå¤´åƒï¼š**
```
http://q1.qlogo.cn/g?b=qq&nk=QQå·ç &s=å°ºå¯¸
http://q2.qlogo.cn/g?b=qq&nk=QQå·ç &s=å°ºå¯¸
```

**é«˜æ¸…å¤´åƒï¼š**
```
http://q.qlogo.cn/headimg_dl?dst_uin=QQå·ç &spec=å°ºå¯¸&img_type=æ ¼å¼
```

### æœåŠ¡å™¨é€‰æ‹©é€»è¾‘

æ™®é€šæ¥å£æ ¹æ®QQå·å¥‡å¶æ€§é€‰æ‹©æœåŠ¡å™¨ï¼š
- å¶æ•°QQå· â†’ q1æœåŠ¡å™¨
- å¥‡æ•°QQå· â†’ q2æœåŠ¡å™¨

## ğŸ“ ç¤ºä¾‹ä»£ç 

### å®Œæ•´ä½¿ç”¨ç¤ºä¾‹

```python
from qq_avatar import QQAvatar

def main():
    avatar = QQAvatar()
    qq_number = "123456789"
    
    # 1. è·å–URL
    print("é«˜æ¸…å¤´åƒURL:", avatar.get_avatar_url(qq_number, hd=True))
    print("æ™®é€šå¤´åƒURL:", avatar.get_avatar_url(qq_number, hd=False))
    
    # 2. ä¸‹è½½å¤´åƒ
    avatar.download_avatar(qq_number, "my_avatar.jpg", hd=True)
    
    # 3. æ‰¹é‡ä¸‹è½½
    friends = ["10001", "10002", "10003"]
    avatar.batch_download(friends, "friend_avatars")
    
    # 4. éªŒè¯å¤´åƒ
    for qq in friends:
        exists = avatar.check_avatar_exists(qq)
        status = "å­˜åœ¨" if exists else "ä¸å­˜åœ¨"
        print(f"QQ {qq}: å¤´åƒ{status}")

if __name__ == "__main__":
    main()
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œåˆæ³•ä½¿ç”¨ï¼Œè¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å’ŒæœåŠ¡æ¡æ¬¾ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªå·¥å…·ã€‚

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤Issueæˆ–é€šè¿‡å…¶ä»–æ–¹å¼è”ç³»ã€‚

---

**æ³¨æ„**ï¼šè¯·åˆç†ä½¿ç”¨æ­¤å·¥å…·ï¼Œéµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å’Œè…¾è®¯çš„æœåŠ¡æ¡æ¬¾ã€‚
